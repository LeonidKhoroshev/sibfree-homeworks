# Домашнее задание к занятию «Работа с инструментами аналитика информационной безопасности» - Леонид Хорошев

### Цель задания

Аналитик информационной безопасности оценивает безопасность системы и настраивает её. В этом домашнем задании вы познакомитесь с инструментами разведки компонентов и командной строки в Astra Linux и Windows. Научитесь настраивать безопасность сетевых устройств.

В результате выполнения задания вы сможете:

- провести анализ уязвимостей своих операционной системы и сетевых устройств;
- увидеть, какие компоненты для обеспечения безопасности операционной системы следует настроить.

------

### Инструкция к заданию

1. Выполнять работу можно как на платформе Windows OS, так и на Linux OS, в зависимости от того, какой операционной системой пользуетесь. Убедитесь, что у вас установлена одна из них.
2. Установите следующие программы: 
- [nmap](https://nmap.org/) (zenmap),
- [Wireshark](https://www.wireshark.org/),
- [ScanOVAL](https://bdu.fstec.ru/files/scanoval.msi),
- [Lynis](https://cisofy.com/lynis/#installation).
3. Выполните задания.


### Задание 1.  Исследование локальных индикаторов

1. Чтобы провести аудит безопасности системы, вам необходимо установить специальное программное обеспечение:
- если у вас установлена Windows OS, зайдите на сайт ФСТЭК России и скачайте программное обеспечение [ScanOVAL](https://bdu.fstec.ru/files/scanoval.msi) и [базу уязвимостей](https://bdu.fstec.ru/files/scanoval.xml). В случае возникновения вопросов по программному обеспечению воспользуйтесь [инструкцией по эксплуатации оператором программного обеспечения](https://bdu.fstec.ru/files/documents/scanoval_manual.pdf);
- если у вас установлен Linux OS, скачайте [Lynis](https://cisofy.com/lynis/#installation), база уязвимостей включена в ПО.
2. Проведите аудит системы по примеру из лекции, какие уязвимости вы нашли — их точно будет не менее 5. Какие рекомендации вы можете дать по их устранению?


Задание выполнено на хостовой ОС Windows 10, так как в отличие от виртуальных машин на ней установлено максимальное количество программного обеспечения (браузеры, офисные приложения и т.д.)
  
![Alt text](https://github.com/LeonidKhoroshev/sibfree-homeworks/blob/main/2/screenshots/cyber3.png)

Аудит системы проведен, для описание наиболее критичных уязвимостей проведем группировку информации по их идентификатору и опишем самые "серьезные из них". Всего найдено 4 критических уязвимостей и 20 с высоким уровнем риска:
Из критических 2 уязвимости связаны с бесплатным ПО по работе с архивами (7z) - они основаны на невозможностью проверки содержимого архива и доставки на локальный хост вредоносного кода.

Следующая уязвимость связана с протоколом VPN WireGuard. Злоумышленник может осуществить атаку на используемый синхронизированными системами секретный 128-битный ключ и подменить NTP-пакеты, тем самым установив на целевой системе неправильное время, то есть по-просту сделать наш хост непригодным для дальнейшей эксплуатации с потерей данных.

Четвертая критическая уязвимость связана с протоколом OpenSSL и возможностью несанкционированного подключения через него к нашей рабочей станции. Данная уязвимость связана с установкой ПО Cisco packet tracer. Как рекомендация - установка ПО из доверенных источников.

Среди уязвимостей с высоким уровнем опасности также выделяются уязвимости  OpenSSL (также выявлены у Cisco packet tracer), связанные с возможностью подмены сертификатов, и, что самое интересное уязвимость на скриншоте ниже (возможность обхода Windows defender ПО Scanoval).

![Alt text](https://github.com/LeonidKhoroshev/sibfree-homeworks/blob/main/2/screenshots/cyber4.png)

Что касается рекомендаций по устранению - удаление "ненадежного ПО" сразу после окончания его использования, так как большинство незащищенного ПО ставилось исключительно в учебных целях (Wireshark, Cisco packet tracer и т.д.).

Для ПО, используемого повседневно (7z) - то тут основная ответственность лежит на пользователе, так как для обеспечения безопасности требуется не открывать архивы из непроверенных источников.

По протоколу WireGuard желаьтельно использовать только сервисы, "поднятые" самостоятельно на собственных VPS, на которых установлена стандартная защита от ddos атак и система мониторинга (можно настроить свою на базе Zabbix или Prometheus, а можно воспользоваться стандартной, предлагаемой провайдером, например от YandexCloud).

3. Сделайте выводы по степени защищённости операционной системы.

Общий вывод - система защищена слабо, хранить данные, критически важные для бизнеса на данном ПК не рекомендуется. ТАкже необходимот регулярное обновление антивирусного ПО для своевременного обнаружения вредоносного кода и грамотная настройка брандмауэра и межсетевого экрана. Необходимо закрыть неиспользуемые порты, особенно усилить контроль за использованием "самого слабого завена". В нашем случае - это протокол OpenSSL. 

------

### Задание 2. Исследование сетевых индикаторов

Задание выполнено на VM Kali linux, развернутой в VirtualBox. Сканировалась хостовая ОС, но ip адреса не везде совпадают, так как работа выполнялась как в домашней, так и в офисной сети.

1. Скачайте и установите программное обеспечение [nmap](https://nmap.org/) (zenmap).
  
2. Проведите анализ точки доступа, установленной у вас дома.
![Alt text](https://github.com/LeonidKhoroshev/sibfree-homeworks/blob/main/2/screenshots/cyber1.png)
Адрес шлюза по умолчанию (домашнего роутера) - 192.168.1.1.

3. Выполните проверку доступности шлюза по умолчанию командой ping:
![Alt text](https://github.com/LeonidKhoroshev/sibfree-homeworks/blob/main/2/screenshots/cyber2.png)
Передача пакетов прошла в полном объеме, шлюз доступен (что логично, так как роутер в сети и обеспечивает доступ в интернет для всех домашних устройств).

4. Запустите программу nmap (zenmap) и выполните команду `nmap -sV ‘ip  address default gate’ -p-`. Здесь `‘ip  address default gate’` — `ping 192.168.0.1` из примера выше.

![Alt text](https://github.com/LeonidKhoroshev/sibfree-homeworks/blob/main/2/screenshots/cyber10.png)

Видим, что хост сканированию не поддается (видно что машина в сети, но информация о портах - недоступна).
Изменим режим сканирования:

![Alt text](https://github.com/LeonidKhoroshev/sibfree-homeworks/blob/main/2/screenshots/cyber11.png)

Видим 2 открытых порта, Zabbix агент, и систему управления реляционными базами данных. Через telnet везде в соединении отказано.

Теперь выйдем из Kali и запустим nmap непосредственно на хосте.
![Alt text](https://github.com/LeonidKhoroshev/sibfree-homeworks/blob/main/2/screenshots/cyber12.png)

Тут сразу видно и хостовую ОС и на каких портах что используется.


8. Дайте ответ на следующие вопросы:
- Кто производитель оборудования?
- Какая операционная система установлена на устройстве?
- Сколько портов открыто на устройстве?
- Какие сервисы доступны? 
- Есть ли опасные сервисы? Как узнать: скопируйте название службы и её версию, проверьте в поисковой системе.
6. Сделайте выводы по степени защищённости вашего устройства. 

-----

### Задание 3. Анализ сетевого трафика (задание со * повышенной сложности)

Данное задание выполнено на виртуальном хосте, развернутом в Virtualbox под управлением Kali linux.

1. Установите [Wireshark](https://www.wireshark.org/). Инструмент понадобится для сбора сетевого трафика и последующего его анализа. 
2. После установки Wireshark перезапустите систему.
3. После перезагрузки в начале работы запустите Wireshark.
4. Включите сбор информации через сетевой интерфейс и приступите к работе.
5. Зайдите на любые сайты, посмотрите различные ресурсы. Собирайте информацию не более 5 минут, после чего отключите сбор информации и сохраните лог пакетов.
6. При работе с Wireshark опирайтесь на [инструкцию](https://habr.com/ru/articles/735866/). 
7. Приступите к анализу:
- Какие пакеты генерируются в вашей сети?
- Что вы можете сказать о содержимом пакетов?
- Какая подозрительная информация вам встречалась
8. Сделайте выводы.

Поскольку Wireshark установлен на Kali по-умолчанию, включаем wireshark:
```
sudo su
wireshark
```
Далее в Gui анализируем наш трафик 
![Alt text](https://github.com/LeonidKhoroshev/sibfree-homeworks/blob/main/2/screenshots/cyber5.png)
видим некоторое количество протоколов UDP, предположем, это может быть связано с запущенным на хостовой ОС видео с сервиса Youtube.

Анализируем один из пакетов:
![Alt text](https://github.com/LeonidKhoroshev/sibfree-homeworks/blob/main/2/screenshots/cyber6.png)

Видим 2 ip адреса - `192.168.251.221` - наш хост
```
ipconfig
```
![Alt text](https://github.com/LeonidKhoroshev/sibfree-homeworks/blob/main/2/screenshots/cyber7.png)

Второй адрес - `239.255.255.250` ищем в открытых источниках. Это простой адрес протокола обнаружения Simple Service Discovery Protocol (SSDP), то есть сетевой протокол, основанный на наборе интернет-протоколов для рекламы и обнаружения сетевых служб и информации о присутствии.

Не очень информативно, идем дальше:
![Alt text](https://github.com/LeonidKhoroshev/sibfree-homeworks/blob/main/2/screenshots/cyber8.png)

Перехвачен tcp пакет с адреса - `192.168.251.72` (Kali) на `34.120.158.37` (один из адресов Google)

Далее смотрим как устанавливаются "трехсторонние рукопожатия", проверяются сертификаты сайтов и принимаются пакеты с адресов, принадлежащих Яндексу и Вконтакте.

![Alt text](https://github.com/LeonidKhoroshev/sibfree-homeworks/blob/main/2/screenshots/cyber8.png)




